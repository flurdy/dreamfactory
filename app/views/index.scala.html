@(projectsFound: Int, updatedProjects: List[Project], newProjects: List[Project], popularProjects: List[Project], randomProjects: List[Project], tags: List[Tag], characteristics: ProjectCharacteristics.CharacteristicPossibilities)(implicit webJarAssets: WebJarAssets, messages: Messages, latestNews: List[News])

@import helper._

@projectBox(title: String, projects: List[Project], evenClass: String = "") = {
    @if(!projects.isEmpty){
      <div class="project-list-box col-xs-6 col-sm-6 @evenClass">
      <div class="well">
         <h3>@title</h3>
         <table class="table table-striped table-condensed">
            <tbody>
               @for( project <- projects){
                  <tr>
                     <td><a href="@routes.ProjectController.showProject(project.title)">@Html(project.title)</a></td>
                     @project.urls.liveOrProject.map { url =>
                        <a href="@url.value">@url.curt(25)</a>
                     }.orElse(Some("")).map{ link =>
                        <td>@link</td>
                     }
                  </tr>
               }
            </tbody>
         </table>
      </div>
      </div>
   }
}

@characteristicsRow(characteristicType: String, characteristics: Set[_ <: ProjectCharacteristics.Characteristic]) = {
   <ul class="list-inline characteristic-list">
      <li class="characteristic-title">
         @Messages(s"project.characteristics.$characteristicType")
      </li>
      @characteristicsRowItem(characteristicType, characteristics)
   </ul>
}

@characteristicsRowItem(characteristicType: String, characteristics: Set[_ <: ProjectCharacteristics.Characteristic]) = {
   @for(characteristic <- characteristics){
      <li>
         <a href="@routes.ProjectController.findProjectsByCharacteristic(characteristicType,characteristic.name)" class="btn btn-default well well-sm" type="submit">
            @Html(Messages(s"project.characteristics.$characteristicType.$characteristic"))
         </a>
      </li>
   }
}

@main(){ } {

   <div class="row">

      @projectBox(Messages("projects.popular.title"), popularProjects)

      @projectBox(Messages("projects.updated.title"), updatedProjects, "project-list-box-even")

   </div>

   <div class="row">

      @projectBox(Messages("projects.new.title"),     newProjects)

      @projectBox(Messages("projects.random.title"),  randomProjects, "project-list-box-even")

   </div>


   <div class="well search-box row">

      <div class="row">
         @form(action=routes.ProjectController.findProjectsBySearch, 'method -> "GET"){
            <div class="col-xs-8 col-sm-8 col-sm-offset-1">
               <div class="input-group">
                     <input type="text" class="form-control" placeholder="search amongst @projectsFound projects"
                        maxlength="200" name="searchterm" />
                     <span class="input-group-btn">
                        <button class="btn btn-default" type="submit">search</button>
                     </span>
               </div>
            </div>
         }
      </div>
   </div>


   @if(!tags.isEmpty){
      <div class="well row">

         <h4>@Messages("projects.tags")</h4>

         <ul class="list-inline">
            @for(tag <- tags){
               <li>
                  @form(action=routes.ProjectController.findProjectsByTag){
                     <input type="hidden" name="tag" value="@{tag.name}" />
                     <button class="well well-sm" type="submit">@{tag.name}</button>
                  }
               </li>
            }
         </ul>
      </div>
   }

   @if(!characteristics.isEmpty){
      <div class="well row">

         <h4>@Messages("projects.characteristics")</h4>

         @characteristicsRow("appeal", characteristics.appeals)

         @characteristicsRow("complexity", characteristics.complexities)

         @characteristicsRow("likelihood", characteristics.likelihoods)

         @characteristicsRow("status.development", characteristics.developmentStatuses)

         @characteristicsRow("status.release", characteristics.releaseStatuses)

         @characteristicsRow("status.deploy", characteristics.deployStatuses)

      </div>
   }
}
