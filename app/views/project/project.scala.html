@(project: Project)(implicit webJarAssets: WebJarAssets, messages: Messages, latestNews: List[News])

@import helper._

@versionsRow(title: String, version: String) = {
   <tr>
      <td class="col-sm-4 com-xs-4">@Messages(title)</td>
      <td>@Html(version) </td>
   </tr>
}
@dateRow(title: String, date: String) = {
   <tr>
      <td class="col-sm-4 com-xs-4">@Messages(title)</td>
      <td>@date</td>
   </tr>
}

@urlRow(title: String, url: Url) = {
   <tr>
      <td class="col-sm-4 com-xs-4">@Messages(title)</td>
      <td><a href="@{url.value}">@{url.naked}</a></td>
   </tr>
}

@newsRow(news: News) = {
   <tr>
      <td class="col-sm-4 com-xs-4">@news.dateFormatted</td>
      <td>@Html(news.description)</td>
   </tr>
}

@characteristicRow( characteristicO: Option[ProjectCharacteristics.Characteristic], title: String) = {
   @for(characteristic <- characteristicO) {
      @characteristicRower(title, characteristic.name)
   }
}

@characteristicRower(title: String, characteristic: String) = {
   <tr>
      <td class="col-sm-4 com-xs-4">@Messages(title)</td>
      <td>@Html(Messages(title + "." + characteristic)) </td>
   </tr>
}

@main() {


   <div class="well">
      <h3>
         @Html(project.title)
      </h3>
      @for(description <- project.description ){
         <p>@Html(description)</p>
      }
   </div>

   @if(!project.urls.isEmpty){
   <div class="well">

      <h4>@Messages("project.links.title")</h4>

      <table class="table table-striped table-condensed">
         <tbody>
            @for(url <- project.urls.project){
               @urlRow("project.links.project.title", url)
            }
            @for(url <- project.urls.live){
               @urlRow("project.links.live.title", url)
            }
            @for(key <- project.urls.others.keys){
               @for(url <- project.urls.get(key)){
                  @for(title <- url.title){
                     @urlRow(s"project.links.${title}.title", url)
                  }
               }
            }
         </tbody>
      </table>
   </div>
   }

   @if(!project.dates.isEmpty){
   <div class="well">

      <h4>@Messages("project.dates.title")</h4>

      <table class="table table-striped table-condensed">
         <tbody>
            @for(date <- project.dates.created){
               @dateRow("project.dates.created.title", date)
            }
            @for(date <- project.dates.updated){
               @dateRow("project.dates.updated.title", date)
            }
         </tbody>
      </table>
   </div>
   }

   @if(!project.versions.isEmpty){
   <div class="well">

      <h4>@Messages("project.versions.title")</h4>

      <table class="table table-striped table-condensed">
         <tbody>
            @for(version <- project.versions.live){
               @versionsRow("project.versions.live.title", version)
            }
            @for(version <- project.versions.dev){
               @versionsRow("project.versions.dev.title", version)
            }
         </tbody>
      </table>
   </div>
   }

   @if(!project.characteristics.isEmpty){
   <div class="well">

      <h4>@Messages("project.characteristics.title")</h4>

      <table class="table table-striped table-condensed">
         <tbody>
            @characteristicRow(project.characteristics.appeal,"project.characteristics.appeal")
            @characteristicRow(project.characteristics.complexity,"project.characteristics.complexity")
            @characteristicRow(project.characteristics.likelihood,"project.characteristics.likelihood")
            @characteristicRow(project.characteristics.developmentStatus,"project.characteristics.status.development")
            @characteristicRow(project.characteristics.releaseStatus,"project.characteristics.status.release")
            @characteristicRow(project.characteristics.deployStatus,"project.characteristics.status.deploy")
         </tbody>
      </table>
   </div>
   }

   @if(!project.tags.isEmpty){
   <div class="well">

      <h4>Tags</h4>

         <ul class="list-inline">
            @for(tag <- project.tags){
               <li>
                  @form(action=routes.ProjectController.findProjectsByTag){
                     <input type="hidden" name="tag" value="@{tag.name}" />
                     <button class="well well-sm" type="submit">@{tag.name}</button>
                  }
               </li>
            }
         </ul>
   </div>
   }

   @if(!project.news.isEmpty){
   <div class="well">

      <h4>News</h4>

      <table class="table table-striped table-condensed">
         <tbody>
            @for(news <- project.news){
               @newsRow(news)
            }
         </tbody>
      </table>
   </div>
   }

}
